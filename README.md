# go-tg-bot 

Телеграмм бот для игры в города. также есть возможность получения информации о конкретном городе.

## Разворачивание проекта 

### Конфигурация проекта 

В файле `configs/config.go` поменять значение `BOT_NAME`, а также добавить в конфиги константу - `TOKEN` с токеном вашего бота 

### Запуск docker контейнера 

Запустить команду внутри директории проекта: 

`docker-compose build`. 

А затем: 

`docker-compose up`. 

### Импорт базы 

Далее нужно импортировать таблицу с городами, она находится в `data\geo.sql`. 

Для этого можно воспользоваться pgAdmin, которая находится на `http://localhost:5050/` 

Данные для входа указаны в файле `docker-compose.yml` 

### Установка хуков 

Последнее что осталось сделать установить вебхук для телеграмма. Для этого нужен https сервер, если есть, то лучше использовать свой. 

Если нету, то можно воспользоваться сервисом https://ngrok.com/. Скачиваем программу и выполняем в ней команду `ngrok http 8000`. 

Это свяжет контейнер докера с внешним https сервером, далее нужно установить вебхук, вставить ваш url и токен бота: 

`curl -F "url=https://57df6fe3b52a.ngrok.io"  https://api.telegram.org/bot{YourBotToken}/setWebhook` 
